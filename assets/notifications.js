import{a as r}from"./index.js";const f="https://your-backend.railway.app/api",a=r.create({baseURL:f,headers:{"Content-Type":"application/json"}});async function m(e){const t=new Date;new Date(t.getTime()+24*60*60*1e3);const n=e.filter(i=>{if(!i.dueDate||i.status==="completed")return!1;const o=(new Date(i.dueDate).getTime()-t.getTime())/(1e3*60*60);return o>=23&&o<=25});for(const i of n)await d(i)}async function g(e){const t=new Date;new Date(t.getTime()+24*60*60*1e3);const n=e.filter(i=>{if(!i.reminder24h)return!1;const o=(new Date(i.date).getTime()-t.getTime())/(1e3*60*60);return o>=23&&o<=25});for(const i of n)await l(i)}async function d(e){try{const t=new Date(new Date(e.dueDate).getTime()-864e5);await a.post("/notifications",{userId:"default",type:"task_reminder",title:`Задача "${e.title}"`,message:"Срок выполнения истекает через 24 часа",taskId:e.id,scheduledAt:t.toISOString()}),console.log(`Notification scheduled for task: ${e.title}`)}catch(t){console.error("Error creating task notification:",t)}}async function l(e){try{const t=new Date(new Date(e.date).getTime()-864e5);await a.post("/notifications",{userId:"default",type:"meeting_reminder",title:`Созвон "${e.title}"`,message:`Созвон через 24 часа в ${e.platform}`,meetingId:e.id,scheduledAt:t.toISOString()}),console.log(`Notification scheduled for meeting: ${e.title}`)}catch(t){console.error("Error creating meeting notification:",t)}}export{g as checkMeetingNotifications,m as checkTaskNotifications};
